
<div class="$ThemeName" id="Effect_21_LinkAndZoom${ModuleID}" style=" display:none; width:${xf.ViewXmlSetting("width","100%")};">
  <ul>
    #if($DataList.Count > 0) 
    #foreach($DataItem in $DataList)
    <li>
    <div class="carousel_box">
      <div class="carousel_image image-zoom">
         #if( $DataItem.UrlLink != "")
            <a href="${xf.ViewLinkUrl($DataItem.UrlLink)}"  target="${xf.ViewLinkTarget($DataItem)}"><img src="${xf.ViewLinkUrl($DataItem.Thumbnails)}" alt="$DataItem.Title" width="100%" /></a>
         #else
            <img src="${xf.ViewLinkUrl($DataItem.Thumbnails)}" alt="$DataItem.Title" width="100%" />
         #end
      
        <div class="Icon_list
        
         #if( ${xf.ViewXmlSetting("Icon_Picture_Status","true")} == "true" && ${xf.ViewXmlSetting("Icon_Link_Status","true")} == "true")
            Icon_list_1
         #else 
            #if( ${xf.ViewXmlSetting("Icon_Picture_Status","true")} == "true")
                Icon_list_2
            #else
             #if( ${xf.ViewXmlSetting("Icon_Link_Status","true")} == "true")
                Icon_list_3
             #end
            #end
         #end
        ">
             #if( ${xf.ViewXmlSetting("Icon_Picture_Status","true")} == "true" && $DataItem.Picture != "")
                <a href="${xf.ViewLinkUrl($DataItem.Picture)}" class="fancybox fancybox-${ModuleID}" data-fancybox-group="gallery-${ModuleID}" title="$DataItem.Title"><span class="Icon_zoom"></span> </a>
             #end

             #if( ${xf.ViewXmlSetting("Icon_Link_Status","true")} == "true" && $DataItem.UrlLink != "")
                <a href="${xf.ViewLinkUrl($DataItem.UrlLink)}"  target="${xf.ViewLinkTarget($DataItem)}"><span class="Icon_link"></span> </a>
             #end
          </div>
      </div>
      <h3 class="carousel_title">
         #if( $DataItem.UrlLink != "")
            <a href="${xf.ViewLinkUrl($DataItem.UrlLink)}"  target="${xf.ViewLinkTarget($DataItem)}">$DataItem.Title</a>
         #else
            $DataItem.Title
         #end
      </h3>
      <div class="carousel_cap">$DataItem.ContentText</div>
    </div>  
    </li>
    #end 
    #end
  </ul>
  #if(${xf.ViewXmlSetting("Navigation",true)}) <a id="prev${ModuleID}" class="prev" href="javascript:;">&lt;</a> <a id="next${ModuleID}" class="next" href="javascript:;">&gt;</a> #end
  
  #if(${xf.ViewXmlSetting("pager",true)})
  <div id="pager${ModuleID}" class="pager"></div>
  #end </div>
<script type="text/javascript" charset="utf-8">
      jQuery(window).load(function () {
        jQuery('#Effect_21_LinkAndZoom${ModuleID}').fadeIn("slow");
         base_photo_hover();
        jQuery('#Effect_21_LinkAndZoom${ModuleID} > ul').carouFredSel({
            mousewheel: ${xf.ViewXmlSetting("mousewheel","true")},//used for scrolling via the mousewheel
            circular:${xf.ViewXmlSetting("circular","true")},//Determines whether the carousel should be circular.
            infinite:${xf.ViewXmlSetting("infinite","true")},//Determines whether the carousel should be infinite.
            direction:'${xf.ViewXmlSetting("direction","left")}',//The direction to scroll the carousel, determines whether the carousel scrolls horizontal or vertical and -when the carousel scrolls automatically- in what direction. Possible values: "right", "left", "up" or "down".
            cookie:${xf.ViewXmlSetting("cookie","true")},//Determines whether the carousel should start at its last viewed position.The cookie is stored until the browser is closed.

            scroll: {
                items:${xf.ViewXmlSetting("scroll_items",1)},//The number of items to scroll.
                fx:'${xf.ViewXmlSetting("scroll_fx","scroll")}',//Indicates which effect to use for the transition.Possible values: "none", "scroll", "directscroll", "fade", "crossfade", "cover", "cover-fade", "uncover" or "uncover-fade".
                easing:'${xf.ViewXmlSetting("scroll_easing","swing")}',//Indicates which easing function to use for the transition. jQuery defaults: "linear" and "swing", built in: "quadratic", "cubic" and "elastic".
                duration:${xf.ViewXmlSetting("scroll_duration",500)},//Determines the duration of the transition in milliseconds.
                queue:${xf.ViewXmlSetting("scroll_queue","false")}//Determines whether the scrolling should be queued if the carousel is currently being animated.
            },
            auto:{
                play:${xf.ViewXmlSetting("play","true")},//Determines whether the carousel should scroll automatically or not.
                timeoutDuration:${xf.ViewXmlSetting("timeoutDuration",3000)},//The amount of milliseconds the carousel will pause.
                delay:${xf.ViewXmlSetting("delay",0)} //Additional delay in milliseconds before the carousel starts scrolling the first time.
            },
			swipe: {
				onMouse: ${xf.ViewXmlSetting("onMouse","true")},//Determines whether the carousel should scroll via dragging (on non-touch-devices only).
				onTouch: ${xf.ViewXmlSetting("onTouch","true")}//Determines whether the carousel should scroll via swiping gestures (on touch-devices only).
			},
			prev: '#prev${ModuleID}',
			next: '#next${ModuleID}',
			pagination: "#pager${ModuleID}",
			responsive: true,
			items: {
				width:${xf.ViewXmlSetting("items_width",300)},//The width of the items.
				height: 'auto',//
				visible: {
					min: ${xf.ViewXmlSetting("items_min",1)},//A map for min and max.
					max: ${xf.ViewXmlSetting("items_max",6)}//A map for min and max.
				}
			}
        });

    


         jQuery('.fancybox-${ModuleID}').fancybox({
                 modal: ${xf.ViewXmlSetting("fancybox_modal","false")},
                scrollOutside: ${xf.ViewXmlSetting("fancybox_scrollOutside","true")},
                 // Properties for each animation type
                // Opening fancyBox
                openEffect: '${xf.ViewXmlSetting("fancybox_openEffect","fade")}', // 'elastic', 'fade' or 'none'
                openSpeed: ${xf.ViewXmlSetting("fancybox_openSpeed",250)},
                openEasing: '${xf.ViewXmlSetting("fancybox_openEasing","swing")}',
                openOpacity: ${xf.ViewXmlSetting("fancybox_openOpacity","true")},

                //Closing fancyBox
                closeEffect: '${xf.ViewXmlSetting("fancybox_closeEffect","fade")}', // 'elastic', 'fade' or 'none'
                closeSpeed: ${xf.ViewXmlSetting("fancybox_closeSpeed",250)},
                closeEasing: '${xf.ViewXmlSetting("fancybox_closeEasing","swing")}',
                closeOpacity: ${xf.ViewXmlSetting("fancybox_closeOpacity","true")}
        });

        function base_photo_hover() {
            // Photo Hover
            jQuery('.image-zoom, .image-link').unbind().hoverIntent({
                over: function () {
                    $('img', jQuery(this)).stop().animate({
                        opacity: 0.4
                    }, 150);
                },
                out: function () {
                    jQuery('img', $(this)).stop().animate({
                        opacity: 1
                    }, 150);
                }
            });
        }
    });
	
jQuery(window).load(function () {
	var thisopts=$("#Effect_21_LinkAndZoom${ModuleID} li"),
	     maxheight=0;
	for(i=0;i<thisopts.length;i++){maxheight = maxheight > parseInt(thisopts.eq(i).outerHeight()) ? maxheight:parseInt(thisopts.eq(i).outerHeight());}
	$("#Effect_21_LinkAndZoom${ModuleID} .caroufredsel_wrapper").height(maxheight);
})
	
	
 
</script> 
