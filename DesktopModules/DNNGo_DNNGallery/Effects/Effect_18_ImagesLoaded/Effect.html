<div class="$ThemeName">
    <div id="gallery_boxs_${ModuleID}" class="gallery_boxs  clearfix">
        #if($DataList.Count > 0) 
            #foreach($DataItem in $DataList)
                <div class="box">
                        <a ${xf.ViewFancyBox($DataItem)} target="${xf.ViewLinkTarget($DataItem)}" href="${xf.ViewLinkUrl($DataItem.UrlLink)}"  title="$DataItem.Description"><img src="${xf.ThumbnailUrl($DataItem,${xf.ViewXmlSetting("thumbnail_width",200)},200,"W","p")}"  alt="$DataItem.Title" title="" /></a>
                </div>
            #end 
        #end
    </div>
        ${Pager}
</div>

 <script type="text/javascript">
     jQuery(function (q) {
         q('#gallery_boxs_${ModuleID}').imagesLoaded(function () {
             q(this).masonry({
                 itemSelector: '.box',
                  isAnimated: ${xf.ViewXmlSetting("isAnimated","true")}
             });
         });
      
        jQuery('.fancybox-${ModuleID}')
		  		.attr('rel', 'media-gallery')
		  		.fancybox({
                 modal: ${xf.ViewXmlSetting("fancybox_modal","false")},
                scrollOutside: ${xf.ViewXmlSetting("fancybox_scrollOutside","true")},
                 // Properties for each animation type
                // Opening fancyBox
                openEffect: '${xf.ViewXmlSetting("fancybox_openEffect","fade")}', // 'elastic', 'fade' or 'none'
                openSpeed: ${xf.ViewXmlSetting("fancybox_openSpeed",250)},
                openEasing: '${xf.ViewXmlSetting("fancybox_openEasing","swing")}',
                openOpacity: ${xf.ViewXmlSetting("fancybox_openOpacity","true")},

                //Closing fancyBox
                closeEffect: '${xf.ViewXmlSetting("fancybox_closeEffect","fade")}', // 'elastic', 'fade' or 'none'
                closeSpeed: ${xf.ViewXmlSetting("fancybox_closeSpeed",250)},
                closeEasing: '${xf.ViewXmlSetting("fancybox_closeEasing","swing")}',
                closeOpacity: ${xf.ViewXmlSetting("fancybox_closeOpacity","true")},
                'autoScale':false
        });
     }); 
 
</script>